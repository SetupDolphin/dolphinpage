generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Task {
  id             Int             @id @default(autoincrement())
  title          String
  description    String
  points         Int
  task_type      String
  verify_data    String
  template       String?
  created_at     DateTime        @default(now())
  claims         TaskClaim[]
  submissions    TaskSubmission[] // Tambahkan relasi ke TaskSubmission
}

model TaskClaim {
  id             Int      @id @default(autoincrement())
  wallet_address String
  task_id        Int
  claimed_at     DateTime @default(now())
  task           Task     @relation(fields: [task_id], references: [id])

  @@unique([wallet_address, task_id])
}

model UserPoints {
  id            Int      @id @default(autoincrement())
  walletAddress String
  points        Int
  activity      String
  created_at    DateTime @default(now())
}

model TaskSubmission {
  id             Int      @id @default(autoincrement())
  task_id        Int
  wallet_address String
  proof_image    String   @db.LongText
  twitter_link   String
  status         String   @default("PENDING")
  created_at     DateTime @default(now())
  task           Task     @relation(fields: [task_id], references: [id])
}